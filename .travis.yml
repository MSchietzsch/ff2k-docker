services:
- docker
before_install:
- "./.travis_credentials.sh"
install:
- docker-compose build
env:
  global:
  - secure: QBjWeg1f5QV023twAOy8XPiqqBBUWeEU626ci3K8QE1RfWOc+mPo5pW/ZS6uC9W/cOsIGAcGiyAVDupi9cp30jiipHTVRGZi1YOo/BXrl6abTedWoo5Sa/KQ8RCmzFFPyneC/7YMYKz/8C6BeOpfRlgXjK5zeG2Ta1JLgiP4BbPtwE5XpyQmJKtJsOLmWedme/yPNTOUZqv5xFPP2z/wj7/xW+4grtHsxz93q6SNbCBtQywdmGAjaQQsFeRXWqU4cezQo5QiWhLk5uT3zl4pcO7O8fg35zxbUIlit7lmXOl79138r4WUBLhIKy/jWYhTy4SkGzl3dSGEpnuttKnkqrVBxibzFWdINUV21xuV6tJcF/0hgA/BTknnmdPV7Bq70wO/YtDnx9KQbWUIiDghf5Gm26hVBN3qPWsmnOdJbYVbFHw0umDwINLDXhEkuxUgx4XYIuIRchf/zb3V5vNPBdGGoGBjQzoW0iwIs5AYZKKFLgZTk0rkr5zBgmpvhYyrveEVvcpqvP5VQgwdtXeb3rg/BczEJsmvFkwlwMbl5TrjZ6oKZUrZ/Ga5PL6C4+JyHOf80ReDT0FGHYKVRDw9Kk7OOEpVY16oaOv4nDvK/c/0F3r9BecE2Jz7rFnepukeXD2BSZh4/CdvBa6t6tWa08xmTtXi9ZKUpziz11e8Pms=
  - secure: gYI11qzkwB6BYIF5441kXm3c4DyDxAAqjbV56efaDe6q+EdVaTbK2ree0B/y6S2JtRsiNBOe7gOMjQ9EuiTNGPTKDIb9EPYDhCS+Vf06Vi4TXhr+P1odBke+P8oMrPDE1q3LxwIG7fY4CTRYl9RKC6sH7LgEFXHCgHJlve8oFnqb0IE/77S3nL9C+Q2WUYAY2z12YJ7NqaxbIn26TlaGSx+4VQ6cUUKNSOqoLXsrhdH4mWmEilJRSBmb0EryNYNyf1BmkTGORr2gTQmX0Fq/41DZo1YRFiXqJ23UkFo/bfzSE/uuYtsDMNzqqcnzt0XHFY7NQyCqZKXNnbVy4Ojth07jAAiv+kLEysCZPOWjtkAK2xNb9gd36wezJvg0L6u8qfBltb+2O1CP4ASD5fSYgv+HPCIfLM7tyvaWxSBQjf6C0HGa256SwlNrieZF30WDJvvhb+9Il5OktMwDNSJ599ynF5vnslHou3iTTB2lb+wW3VMKlu3EepcfNisDT1XFR9mReQ/3vjNndEACSiHDszCZclb+d30Q7ypuxJLXFNrdzA49bw84mFG4sdbO3b6fYqd9Gnv6NWavnUqeVBK7qFe1M1O8iGVJFkStoFT/awkXkMpB4f4ukiS23Db8Qhk6iEgjhg5SlZkwI0k4dluRRcodSdtGrxygjgH7NdFOS04=
  - secure: OGJ4p2WJm3sKNV00R9wU8QTAN/vOW9Flgu7ctX8o9OAXxMoUXhONI4M2yoCjf/dDEXrldNpl9+ggk3B5gFe+13cSKwYx05+6oJXN3toCt7JuGozNQSDUMawud55JOQW444s/5rla+wFbq6Hjn3C3pcsRfbqIrBk8/qWkeHWo46BKTEJ9+pU5rxBh+CcZ3C18aHvu/q6m+0UWg210G7HZsbxnaI1fl2NkhR+T/WOs5nPIWpZiiABz93rAmP5NpkCNWtSJN5N9ALrOH+NUGVSNU9RYZUmxxxaLnHJLSzf09f9o4IP5V5o1KRB8sWM+5+dfRaCm8WZ6/ebtA3+8xwcTVcJNjvG26LAJyI+EHp8RewCjBqnc2y0Sj2WgjcLQh4uq5WYep48Ee7b0bF9X8gmgDvDogj80QRONzCvjady/SF5VZDNg92qCMbl8xxxOxpiBsm3Se7v27845/HQOukHgHbTbMP/Pse31pKe8TFL0n8hP4Snh2zTWz6u+8/yDd1jyY7TcKYETTahz98I8iQdvW9l/8y8sldGVlMe3FGvEF6/63gS8A0FvE1aR7N7N63J3GD0QWQC2BGm/lxTFeKU0Vk47K3rnwccvzFv1PXG+9T6k3ZbuKp43AFbHVJQyVeSVQUwKQJS2OAImQb/lMtrzn2TPBeCtwY1bgNYP2eFG7Gc=
  - secure: iWOydxoX1tAth2ZJAjfO4Jqxod32sb3dALHE7SofjtiAC9okiindWNvkuxc4iBK3ap0iiBXBWFFdR8lYd/aiTni9riQ7y90ejgIp600pNGuZnpyFFuIha/xDOYKy24RYIJu3cCIN3Vuds5JEnNx55z0XPNGrBzeFs0PsQw/nnWlvmras+AkB5EyWUhApZTo5q2NHb7ANP1LPuma4O4qxVuWPd1C/OQ4OqJ6L/pVO3Q1YXv9fjuErR/jwwrpVNZE5Gluk7wE9k84oiVOqjsZmNXbld54NaLn/OyOImoEJpcHafXd/H0LO+2s2jW6q+xh6qArWxoitihlPhSn4qV6feAJDM7PnfQKq8ZQg6shtT4HQBeJ2UaXEIvdVmkdBXVc1q6hLcSOjSUeUDIv/STlbw6ZJIxxiyqJrXZ4vvbleXk1Q8b+Xini+lHixoisW8C0DD9uS2hQ0J78izDxdS0e/ogcgJlphil7e8H31aLlP0o6lylFhAtUJB4kcHpmmaIQLj9XpyRwjS0N+fO86rx6umjkR3DdtaGHVrhor4hAMGlurPbOsHmonLSJEH96obQNSVyk3hCYVLcOHAc2pKx9FonNV7ONTeDF8x57HpdWSSBhPwb+ixrH2FQcftKZMsD+C3yU7jo2uEktbSf/T+C9i0MToFYkjtd1fJwneLpCW9GQ=
  - secure: VRwFmkTa2OUb9PYXJUtsbOTWzrNISsosOtdKhTey69saguZN0LW4UljUpurzA0/S1xpaJoCADdHPYV7DdTq6G6zBeL/Vowo+vIeyr1t4xLqgWUOsma6P/RPUPJA5cz7ZCDm6Jxs+HYPok6F+E5Govm4KrK0c5fv4xVlRTm1u5zDvOqWUlwSs7DJ88zSqxlhwX7BmP9tyeHCsWUslEak25K9qQuySoAkdX+uX/+l+uXIhnOeVNKrJLqV/ZWWHhaK3x6I44OA/cnUcUSkZNSM+F6c18NYmGcukQWUavqkQZxY6MzQ2vWnMD5n/juKa699u9LjFXNbS9swTIplI6t+PKzhfSxJ81ZFeKiMOuUDSteVDdZuuFCnkH5krgGR16xtqySLMps7kUD3HoTZ8jXLU17uy4/Wb8k3Hb7mNeds50G1YmjvTTE6+ZL8hhAQG8Y2udV//IcpOC50AHyvIa/I2uF2M7o1amLBclM7dHJLHkiahnvIjj21l9+eBNjuSOy/gAzA+2b8DMivWFNK63Pxel1P3h3Zq+VcT9gJdBgxH0yTBuF3MkV9P6k9TtFJzaEoG+I3icMWXLpZYwy3HmUYoS/Jmxw5SpqpRReUsEHKqKPlBKLtCIAyooo/qeoZW7SgG4DAZ7OmkZtuf37w1X51W0cZ4ggOOCNxmIketeHvDjgc=
  - secure: WPVEsgs8tfFuPX2gztTUWFkJIQuq5VC6P+gJ2W7zHjxir2WG5qw/VW7/GzUJoz2t6AnghFXaEcJo/ZzIw6yfWit2FNSMx2ksSy/8HMobQ++9lK7pYHXRB8gmFLATrpx80luy4+uKRAbB+xnXSzdQqJIND2JSzJIWMreB7ypJNLc6vKu+85+yUZqR/M8kM+yyscgIErwSQ0QhhrIWcmAt9CHw2vUwKnjLm4qmr/HxUy0Nm4Y2mBMRjTvoLHDj5J8wBBzkVYabDEV3riVjxZ2NtvsFVrQ5bLaxHGUbk+fQIZRoicHfKMML/PH4QDUSynJgL61FXgFvOHoTGhYucz1dtYiTk4bw2mvlUO/NsklVEi9wz/+3wS+slQ7lu66gqZIQOU7e3CogsHU5XpQncaXlVGsaEMhU7d86AL7OU5H5F59p/iEFJEMsunrxwNjDWRJphe5zBvnu2jLLb2ezgUm0lVGDQUmv2VI8+qX6I+NjbH9+SOmQ5B4s6PZD7o2E7+wOqVb9tnVM/UBveI5vTtyWGkpig09u5bOcNsXR9XYcmUDkG1B0zvJ8d0fCPuxjE/yM1MJ7rYImXv9hke30caZw+Xu8eP0d/pnJYrY+/mDPC+QkHItMaQ2gjZNh43mqzpPw4TysPX1u4gWxIxve1pAKjxWy+2OqXJZWsDGEATKovck=
  - secure: lYX4B44+IxbT+eRwEeZ72iAbP6rdgGOs+XsOdY/SmTnpUheM9upcVNhl6jv38CHbZtO/E7aKccSyKGuxKJqMF92lTrHtcN+uLqeOBgq7mu85Mpl+ClMSUrk7F2xyaof4yicPVhbLSThc2QUjMsjAGMva2uR86xPjaRAQ+tXscqQANFtPOwOH41N9YpHevvi6+7py/KeEpd4oTVKYMdcx4hreoNOEskP/smab6iQKsJLaRlagf8DzAuCZVu43JS6cS9/tSjJgEd+vQh2CG3gxRLXNRJ35B1M1ObRet9gXiFZAkKwRMHn2VGHs66nR4RSyv5+l9TxKSTJQrSxJZ5Wr+SXWae4NDkVR7KU49URq4kE6/REReYYGdC/Ga+imQcuyUvRP31uzqLgWTTLhfolTOqbEpwsSEX759n9gr1hvcDRuMmaUHbM3tIN7Sv/l7KmBYUbS5d3fkHg0XuhDm6aYy846LcCL4ePWDvVZpAs7Cf7y168WwhBH5tAmM+imQnWN/KsrelutIa5gsX1x59k3ysevrLSqpmUwv/+2lnvcddS0x+aS55fBhADK2QCbduVMAL9/po+8mqIu5Iyznad60l5EgLVKEOYAmk2/jBovAkHL4Bc03w3mSs5aEQAbtiww0yXuOrt8gx1CFQNSoPVRNcFQczCA9s8X9p+n9YsXstE=
script:
  - docker-compose up --scale elasticsearch-node=2 --scale web=12 --scale redis=3
